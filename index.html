<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    <title>Бойовий кабріолет</title>
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0B1KMRDXDF"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-0B1KMRDXDF');
    </script>
    <link rel="stylesheet" href="css/styles.css">
    <style>
      /* Viewport height fix for mobile browsers */
      :root {
        --vh: 1vh;
      }
      @supports (height: 100dvh) {
        /* Only apply 100dvh on mobile devices */
        @media (max-width: 850px) {
          #game-container.mobile-fullscreen {
            height: 100dvh;
          }
        }
      }
    </style>
    <script>
      // Update CSS variable for viewport height on mobile
      function updateVH() {
        let vh = window.innerHeight * 0.01;
        document.documentElement.style.setProperty('--vh', `${vh}px`);
      }
      window.addEventListener('resize', updateVH);
      window.addEventListener('orientationchange', updateVH);
      document.addEventListener('DOMContentLoaded', updateVH);
    </script>
</head>
<body>
    <img src="assets/images/left-bg.png" class="left-background" alt="Left background">
    <img src="assets/images/right-bg.png" class="right-background" alt="Right background">
    <img src="assets/images/top-bg.png" class="top-background" alt="Top background">
    <div id="game-container">
        <canvas id="game-canvas"></canvas>
        <div id="ui-overlay" class="hidden">
            <div id="menu-screen" class="ui-screen">
                <h1 id="game-title"></h1>
                <div id="intro-text" class="introduction"></div>
                <div class="menu-buttons">
                    <button id="start-button"></button>
                    <button id="donate-button"></button>
                    <button id="leaderboard-button"></button>
                </div>
                <div class="best-score-container"><span id="best-score-label"></span> <span id="best-score">0</span></div>
            </div>
            <div id="game-over-screen" class="ui-screen hidden">
                <h1></h1>
                <div class="final-score"></div>
                <div class="donation-section">
                    <p></p>
                    <div class="qr-placeholder"></div>
                    <div class="donation-links">
                        <a href="https://send.monobank.ua/jar/3EhDdpcmBW" target="_blank" class="donation-link" id="monobank-link"></a>
                    </div>
                </div>
                <div class="promo-code-section">
                    <p class="promo-code-instructions"></p>
                    <input type="text" id="promo-code">
                    <button id="submit-code-button"></button>
                </div>
                <button id="view-leaderboard-button"></button>
                <button id="restart-button"></button>
            </div>
            <div id="donation-screen" class="ui-screen hidden">
                <h1 id="donation-title"></h1>
                <div class="donation-section">
                    <p></p>
                    <div class="qr-placeholder donation-qr"></div>
                    <div class="donation-links">
                        <a href="https://send.monobank.ua/jar/3EhDdpcmBW" target="_blank" class="donation-link" id="monobank-link"></a>
                    </div>
                </div>
                <button id="back-from-donation-button"></button>
            </div>
            <div id="mission-preparation-screen" class="ui-screen hidden">
                <h1></h1>
                <div class="mission-info">
                    <h2></h2>
                    <p id="mission-description"></p>
                </div>
                <div class="countdown-container">
                    <div id="countdown"></div>
                </div>
            </div>
            <!-- Leaderboard Screen -->
            <div id="leaderboard-screen" class="ui-screen hidden">
                <h1 id="leaderboard-title"></h1>
                <div class="leaderboard-content">
                    <div id="leaderboard-loading" class="leaderboard-message"></div>
                    <div id="leaderboard-error" class="leaderboard-message hidden"></div>
                    <table id="leaderboard-table" class="hidden">
                        <thead>
                            <tr>
                                <th id="leaderboard-rank-header"></th>
                                <th id="leaderboard-name-header"></th>
                                <th id="leaderboard-score-header"></th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-body">
                            <!-- Scores will be inserted here dynamically -->
                        </tbody>
                    </table>
                </div>
                <button id="leaderboard-close-button"></button>
            </div>
            <!-- Submit Score Screen -->
            <div id="submit-score-screen" class="ui-screen hidden">
                <h1 id="submit-score-title"></h1>
                <div class="submit-score-content">
                    <p id="your-score-text"></p>
                    <div class="name-input-container">
                        <label for="player-name" id="player-name-label"></label>
                        <input type="text" id="player-name" maxlength="20">
                    </div>
                    <div id="name-required-error" class="error-message hidden"></div>
                    <div class="submit-score-buttons">
                        <button id="submit-score-button"></button>
                        <button id="cancel-submit-button"></button>
                    </div>
                </div>
            </div>
        </div>
        <div id="hud" class="hidden">
            <div id="score"></div>
            <div id="mission-objective"></div>
            <div id="reb-cooldown-container">
                <div id="reb-cooldown-label"></div>
                <div id="reb-cooldown-bar">
                    <div id="reb-cooldown-fill"></div>
                </div>
            </div>
        </div>
        
        <!-- Mobile Controls -->
        <div id="mobile-controls" class="hidden">
            <div id="dpad-container">
                <button id="dpad-up" class="dpad-button" aria-label="Move Up">&#9650;</button>
                <button id="dpad-right" class="dpad-button" aria-label="Move Right">&#9654;</button>
                <button id="dpad-down" class="dpad-button" aria-label="Move Down">&#9660;</button>
                <button id="dpad-left" class="dpad-button" aria-label="Move Left">&#9664;</button>
            </div>
            <button id="reb-button" aria-label="Activate REB">РЕБ</button>
        </div>
    </div>
    <div class="footer-container">
        <a href="https://nezneba.in.ua/" target="_blank" class="footer-link" id="footer-link"></a>
    </div>

    <!-- Firebase scripts -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
    
    <!-- Scripts -->
    <script src="js/GameTexts.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/firebase/firebaseConfig.js"></script>
    <script src="js/firebase/leaderboardManager.js"></script>
    <script src="js/audioManager.js"></script>
    <script src="js/imageManager.js"></script>
    <script src="js/mapGenerator.js"></script>
    <script src="js/player.js"></script>
    <script src="js/drone.js"></script>
    <script src="js/touchControls.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/missionManager.js"></script>
    <script src="js/game.js"></script>
    <script src="js/main.js"></script>
</body>
</html> 